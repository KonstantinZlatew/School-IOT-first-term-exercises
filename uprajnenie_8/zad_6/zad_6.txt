1) Избор на подходящи DC-DC и LDO компоненти
3.3 V захранване за MCU + Wi-Fi

Отговор: Избери buck конвертор 5V → 3.3V с изходен ток поне 1 A (за запас).

Обяснение: Номинално имаш 200 mA MCU + 500 mA пик Wi-Fi = 700 mA пик. Добре е да имаш запас за загуби, 
други консуматори и transient-и.

Примерни подходящи buck-и (тип клас компоненти):

Отговор: Buck 5V→3.3V, 1–2 A, fSW ~1–2 MHz, синхронен.

Обяснение: Синхронният buck има по-добра ефективност и по-малко загуби спрямо диоден.

1.8 V за сензор (10 mA)

Има два добри варианта:

Вариант A (най-чист за аналогови/чувствителни сензори):

Отговор: LDO 3.3V → 1.8V (например low-noise LDO).

Обяснение: 10 mA е малък ток, загубите са минимални, а LDO дава по-нисък шум.

Вариант B (най-ефективен, ако имаш много 1.8V товари):

Отговор: Малък buck 3.3V → 1.8V.

Обяснение: При 10 mA ефективността не е критична, но ако сензорите станат повече, buck има смисъл.

Изчисление на LDO загуби при 1.8V/10 mA:

Отговор: Ploss = (3.3 − 1.8)·0.01 = 1.5·0.01 = 0.015 W (15 mW).

Обяснение: Това е много малко и не създава термичен проблем.

2) Проектиране на схемата
Вариант 1: Отделни преобразуватели (препоръчителен за упражнение)

Отговор: 5V USB → Buck 3.3V (1A+) → захранва MCU и Wi-Fi; от 3.3V → LDO 1.8V → сензор.

Обяснение: Това е най-просто, евтино и реално използвано решение.

Схема (блоково):

Отговор:

5V USB вход: ESD защита + входен bulk кондензатор (например 47–100 µF)

Buck 5V→3.3V: входни кондензатори близо до чипа + индуктивност + изходни кондензатори

3.3V шина: отделни “клонове” към MCU и Wi-Fi, всеки с локални кондензатори

LDO 3.3V→1.8V: вход/изход кондензатор (според datasheet) + 1.8V към сензора

Обяснение: Локалните кондензатори при Wi-Fi са критични, защото токовете са импулсни.

Минимални кондензатори (практични стойности):

Отговор:

На 3.3V до Wi-Fi: 1×100 µF low-ESR + 2×10 µF + 1×0.1 µF близо до пиновете

До MCU: 1×10 µF + 1×0.1 µF

До LDO за 1.8V: например 1×1–10 µF на вход и 1×1–10 µF на изход (както изисква LDO)

Обяснение: Големият bulk помага при пикове, малките MLCC поемат високочестотните компоненти.

Вариант 2: PMIC (ако искаш “по-професионално” решение)

Отговор: Използваш PMIC с няколко изхода: 1 buck за 3.3V и 1 LDO или buck за 1.8V.

Обяснение: PMIC е удобен, но често е по-сложен за избор и конфигуриране; за учебна задача отделните блокове 
са по-ясни.

3) Симулация на пулсовия ток от Wi-Fi и промяната на Vout
Какво се симулира

Отговор: Моделираш Wi-Fi като “товар”, който скача от нисък ток към 500 mA за кратки импулси.

Обяснение: Реално Wi-Fi модулите дърпат ток на импулси (TX burst), което причинява momentary спад на 
напрежението, ако захранването е “меко”.

Прост модел за напреженов спад

Има два основни източника на проседане:

ESR на кондензатора и проводниците

Разреждане на кондензатора между две компенсации от регулатора

Приближение:

Отговор:

ΔV_ESR ≈ I_step · ESR

ΔV_C ≈ I_step · Δt / C

Обяснение: Първото е моментен скок, второто е “наклон” (droop) по време на импулса.

Примерна симулация на импулс:
Нека имаме I_step = 0.5 A, Δt = 2 ms (примерен burst), и на Wi-Fi шината C = 100 µF, ESR = 30 mΩ.

Отговор:

ΔV_ESR = 0.5 A · 0.03 Ω = 0.015 V (15 mV)

ΔV_C = 0.5 A · 0.002 s / 100e-6 F = 10 V (което е огромно и значи, че само 100 µF не стига за 2 ms без помощ от 
регулатора)

Обяснение: Това показва защо в реалност buck-ът трябва да доставя по-голямата част от тока, а кондензаторът 
покрива най-бързата част. Реалните burst-ове често са по-къси (десетки–стотици µs), а регулаторът реагира бързо.

По-реалистично с Δt = 100 µs:

Отговор:

ΔV_C = 0.5 A · 100e-6 / 100e-6 = 0.5 V

Обяснение: Пак е много, затова обикновено се слага повече ефективен капацитет (например 200–400 µF общо, 
като се отчита derating на MLCC), плюс добър buck и много къси трасета.